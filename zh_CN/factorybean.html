<!DOCTYPE html>


<!--
 | Generated by Apache Maven Doxia Site Renderer 2.0.0 from target/site-src/zh_CN/markdown/factorybean.md at 27 五月 2025
 | Rendered using Apache Maven Fluido Skin 2.1.0
-->
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 2.0.0" />
    <title>mybatis-spring</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-2.1.0.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />
    <script src="./js/apache-maven-fluido-2.1.0.min.js"></script>
  </head>
  <body>
    <div class="container-fluid container-fluid-top">
      <header>
        <div id="banner">
          <div class="pull-left"></div>
          <div class="pull-right"><div id="bannerRight"><h1><a href="https://blog.mybatis.org/"><img src="../../images/mybatis-logo.png" alt="MyBatis logo" /> MyBatis</a></h1></div></div>
          <div class="clear"><hr/></div>
        </div>

        <div id="breadcrumbs">
          <ul class="breadcrumb">
        <li id="publishDate">最近更新: 11 八月 2024<span class="divider">|</span>
</li>
          <li id="projectVersion">版本: 3.0.5-SNAPSHOT</li>
          </ul>
        </div>
      </header>
      <div class="row-fluid">
        <header id="leftColumn" class="span2">
          <nav class="well sidebar-nav">
  <ul class="nav nav-list">
   <li class="nav-header">参考文档</li>
    <li><a href="index.html">简介</a></li>
    <li><a href="getting-started.html">入门</a></li>
    <li class="active"><a>SqlSessionFactoryBean</a></li>
    <li><a href="transactions.html"><span class="icon-chevron-right"></span>事务</a></li>
    <li><a href="sqlsession.html"><span class="icon-chevron-right"></span>使用 SqlSession</a></li>
    <li><a href="mappers.html"><span class="icon-chevron-right"></span>注入映射器</a></li>
    <li><a href="boot.html">使用 Spring Boot</a></li>
    <li><a href="using-api.html">使用 MyBatis API</a></li>
    <li><a href="batch.html">使用 Spring Batch</a></li>
    <li><a href="sample.html">示例代码</a></li>
   <li class="nav-header">项目文档</li>
    <li><a href="project-info.html"><span class="icon-chevron-right"></span>项目信息</a></li>
    <li><a href="project-reports.html"><span class="icon-chevron-right"></span>项目报表</a></li>
  </ul>
          </nav>
          <div class="well sidebar-nav">
            <div id="poweredBy">
              <div class="clear"></div>
              <div class="clear"></div>
<a href="https://maven.apache.org/" class="builtBy" target="_blank"><img class="builtBy" alt="构建依靠 Maven" src="./images/logos/maven-feather.png" /></a>
            </div>
          </div>
        </header>
        <main id="bodyColumn" class="span10">
<p></p><section><a id="SqlSessionFactoryBean"></a>
<h1>SqlSessionFactoryBean</h1>
<p>&#x5728;&#x57fa;&#x7840;&#x7684; MyBatis &#x7528;&#x6cd5;&#x4e2d;&#xff0c;&#x662f;&#x901a;&#x8fc7; <code>SqlSessionFactoryBuilder</code> &#x6765;&#x521b;&#x5efa; <code>SqlSessionFactory</code> &#x7684;&#x3002;&#x800c;&#x5728; MyBatis-Spring &#x4e2d;&#xff0c;&#x5219;&#x4f7f;&#x7528; <code>SqlSessionFactoryBean</code> &#x6765;&#x521b;&#x5efa;&#x3002;</p><section><a id="a.E8.AE.BE.E7.BD.AE"></a>
<h2>&#x8bbe;&#x7f6e;</h2>
<p>&#x8981;&#x521b;&#x5efa;&#x5de5;&#x5382; bean&#xff0c;&#x5c06;&#x4e0b;&#x9762;&#x7684;&#x4ee3;&#x7801;&#x653e;&#x5230; Spring &#x7684; XML &#x914d;&#x7f6e;&#x6587;&#x4ef6;&#x4e2d;&#xff1a;</p>

<pre class="prettyprint"><code class="language-xml">&lt;bean id=&quot;sqlSessionFactory&quot; class=&quot;org.mybatis.spring.SqlSessionFactoryBean&quot;&gt;
  &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot; /&gt;
&lt;/bean&gt;
</code></pre>
<p>&#x9700;&#x8981;&#x6ce8;&#x610f;&#x7684;&#x662f; <code>SqlSessionFactoryBean</code> &#x5b9e;&#x73b0;&#x4e86; Spring &#x7684; <code>FactoryBean</code> &#x63a5;&#x53e3;&#xff08;&#x53c2;&#x89c1; Spring &#x5b98;&#x65b9;&#x6587;&#x6863; 3.8 &#x8282; <a href="https://docs.spring.io/spring/docs/current/spring-framework-reference/core.html#beans-factory-extension-factorybean" class="externalLink">&#x901a;&#x8fc7;&#x5de5;&#x5382; bean &#x81ea;&#x5b9a;&#x4e49;&#x5b9e;&#x4f8b;&#x5316;&#x903b;&#x8f91;</a> &#xff09;&#x3002;
&#x8fd9;&#x610f;&#x5473;&#x7740;&#x7531; Spring &#x6700;&#x7ec8;&#x521b;&#x5efa;&#x7684; bean <strong>&#x5e76;&#x4e0d;&#x662f;</strong> <code>SqlSessionFactoryBean</code> &#x672c;&#x8eab;&#xff0c;&#x800c;&#x662f;&#x5de5;&#x5382;&#x7c7b;&#xff08;<code>SqlSessionFactoryBean</code>&#xff09;&#x7684; getObject() &#x65b9;&#x6cd5;&#x7684;&#x8fd4;&#x56de;&#x7ed3;&#x679c;&#x3002;&#x8fd9;&#x79cd;&#x60c5;&#x51b5;&#x4e0b;&#xff0c;Spring &#x5c06;&#x4f1a;&#x5728;&#x5e94;&#x7528;&#x542f;&#x52a8;&#x65f6;&#x4e3a;&#x4f60;&#x521b;&#x5efa; <code>SqlSessionFactory</code>&#xff0c;&#x5e76;&#x4f7f;&#x7528; <code>sqlSessionFactory</code> &#x8fd9;&#x4e2a;&#x540d;&#x5b57;&#x5b58;&#x50a8;&#x8d77;&#x6765;&#x3002;</p>
<p>&#x7b49;&#x6548;&#x7684; Java &#x4ee3;&#x7801;&#x5982;&#x4e0b;&#xff1a;</p>

<pre class="prettyprint"><code class="language-java">@Configuration
public class MyBatisConfig {
  @Bean
  public SqlSessionFactory sqlSessionFactory() {
    SqlSessionFactoryBean factoryBean = new SqlSessionFactoryBean();
    factoryBean.setDataSource(dataSource());
    return factoryBean.getObject();
  }
}
</code></pre>
<p>&#x901a;&#x5e38;&#xff0c;&#x5728; MyBatis-Spring &#x4e2d;&#xff0c;&#x4f60;&#x4e0d;&#x9700;&#x8981;&#x76f4;&#x63a5;&#x4f7f;&#x7528; <code>SqlSessionFactoryBean</code> &#x6216;&#x5bf9;&#x5e94;&#x7684; <code>SqlSessionFactory</code>&#x3002;
&#x76f8;&#x53cd;&#xff0c;session &#x7684;&#x5de5;&#x5382; bean &#x5c06;&#x4f1a;&#x88ab;&#x6ce8;&#x5165;&#x5230; <code>MapperFactoryBean</code> &#x6216;&#x5176;&#x5b83;&#x7ee7;&#x627f;&#x4e8e; <code>SqlSessionDaoSupport</code> &#x7684; DAO&#xff08;Data Access Object&#xff0c;&#x6570;&#x636e;&#x8bbf;&#x95ee;&#x5bf9;&#x8c61;&#xff09;&#x4e2d;&#x3002;</p></section><section><a id="a.E5.B1.9E.E6.80.A7"></a>
<h2>&#x5c5e;&#x6027;</h2>
<p><code>SqlSessionFactory</code> &#x6709;&#x4e00;&#x4e2a;&#x552f;&#x4e00;&#x7684;&#x5fc5;&#x8981;&#x5c5e;&#x6027;&#xff1a;&#x7528;&#x4e8e; JDBC &#x7684; <code>DataSource</code>&#x3002;&#x8fd9;&#x53ef;&#x4ee5;&#x662f;&#x4efb;&#x610f;&#x7684; <code>DataSource</code> &#x5bf9;&#x8c61;&#xff0c;&#x5b83;&#x7684;&#x914d;&#x7f6e;&#x65b9;&#x6cd5;&#x548c;&#x5176;&#x5b83; Spring &#x6570;&#x636e;&#x5e93;&#x8fde;&#x63a5;&#x662f;&#x4e00;&#x6837;&#x7684;&#x3002;</p>
<p>&#x4e00;&#x4e2a;&#x5e38;&#x7528;&#x7684;&#x5c5e;&#x6027;&#x662f; <code>configLocation</code>&#xff0c;&#x5b83;&#x7528;&#x6765;&#x6307;&#x5b9a; MyBatis &#x7684; XML &#x914d;&#x7f6e;&#x6587;&#x4ef6;&#x8def;&#x5f84;&#x3002;&#x5b83;&#x5728;&#x9700;&#x8981;&#x4fee;&#x6539; MyBatis &#x7684;&#x57fa;&#x7840;&#x914d;&#x7f6e;&#x975e;&#x5e38;&#x6709;&#x7528;&#x3002;&#x901a;&#x5e38;&#xff0c;&#x57fa;&#x7840;&#x914d;&#x7f6e;&#x6307;&#x7684;&#x662f; <code>&lt;settings&gt;</code> &#x6216; <code>&lt;typeAliases&gt;</code> &#x5143;&#x7d20;&#x3002;</p>
<p>&#x9700;&#x8981;&#x6ce8;&#x610f;&#x7684;&#x662f;&#xff0c;&#x8fd9;&#x4e2a;&#x914d;&#x7f6e;&#x6587;&#x4ef6;<b>&#x5e76;&#x4e0d;&#x9700;&#x8981;</b>&#x662f;&#x4e00;&#x4e2a;&#x5b8c;&#x6574;&#x7684; MyBatis &#x914d;&#x7f6e;&#x3002;&#x786e;&#x5207;&#x5730;&#x8bf4;&#xff0c;&#x4efb;&#x4f55;&#x73af;&#x5883;&#x914d;&#x7f6e;&#xff08;<code>&lt;environments&gt;</code>&#xff09;&#xff0c;&#x6570;&#x636e;&#x6e90;&#xff08;<code>&lt;DataSource&gt;</code>&#xff09;&#x548c; MyBatis &#x7684;&#x4e8b;&#x52a1;&#x7ba1;&#x7406;&#x5668;&#xff08;<code>&lt;transactionManager&gt;</code>&#xff09;&#x90fd;&#x4f1a;&#x88ab;<strong>&#x5ffd;&#x7565;</strong>&#x3002;
<code>SqlSessionFactoryBean</code> &#x4f1a;&#x521b;&#x5efa;&#x5b83;&#x81ea;&#x6709;&#x7684; MyBatis &#x73af;&#x5883;&#x914d;&#x7f6e;&#xff08;<code>Environment</code>&#xff09;&#xff0c;&#x5e76;&#x6309;&#x8981;&#x6c42;&#x8bbe;&#x7f6e;&#x81ea;&#x5b9a;&#x4e49;&#x73af;&#x5883;&#x7684;&#x503c;&#x3002;</p>
<p>&#x5982;&#x679c; MyBatis &#x5728;&#x6620;&#x5c04;&#x5668;&#x7c7b;&#x5bf9;&#x5e94;&#x7684;&#x8def;&#x5f84;&#x4e0b;&#x627e;&#x4e0d;&#x5230;&#x4e0e;&#x4e4b;&#x76f8;&#x5bf9;&#x5e94;&#x7684;&#x6620;&#x5c04;&#x5668; XML &#x6587;&#x4ef6;&#xff0c;&#x90a3;&#x4e48;&#x4e5f;&#x9700;&#x8981;&#x914d;&#x7f6e;&#x6587;&#x4ef6;&#x3002;&#x8fd9;&#x65f6;&#x6709;&#x4e24;&#x79cd;&#x89e3;&#x51b3;&#x529e;&#x6cd5;&#xff1a;&#x7b2c;&#x4e00;&#x79cd;&#x662f;&#x624b;&#x52a8;&#x5728; MyBatis &#x7684; XML &#x914d;&#x7f6e;&#x6587;&#x4ef6;&#x4e2d;&#x7684; <code>&lt;mappers&gt;</code> &#x90e8;&#x5206;&#x4e2d;&#x6307;&#x5b9a; XML &#x6587;&#x4ef6;&#x7684;&#x7c7b;&#x8def;&#x5f84;&#xff1b;&#x7b2c;&#x4e8c;&#x79cd;&#x662f;&#x8bbe;&#x7f6e;&#x5de5;&#x5382; bean &#x7684; <code>mapperLocations</code> &#x5c5e;&#x6027;&#x3002;</p>
<p><code>mapperLocations</code> &#x5c5e;&#x6027;&#x63a5;&#x53d7;&#x591a;&#x4e2a;&#x8d44;&#x6e90;&#x4f4d;&#x7f6e;&#x3002;&#x8fd9;&#x4e2a;&#x5c5e;&#x6027;&#x53ef;&#x4ee5;&#x7528;&#x6765;&#x6307;&#x5b9a; MyBatis &#x7684;&#x6620;&#x5c04;&#x5668; XML &#x914d;&#x7f6e;&#x6587;&#x4ef6;&#x7684;&#x4f4d;&#x7f6e;&#x3002;&#x5c5e;&#x6027;&#x7684;&#x503c;&#x662f;&#x4e00;&#x4e2a; Ant &#x98ce;&#x683c;&#x7684;&#x5b57;&#x7b26;&#x4e32;&#xff0c;&#x53ef;&#x4ee5;&#x6307;&#x5b9a;&#x52a0;&#x8f7d;&#x4e00;&#x4e2a;&#x76ee;&#x5f55;&#x4e2d;&#x7684;&#x6240;&#x6709;&#x6587;&#x4ef6;&#xff0c;&#x6216;&#x8005;&#x4ece;&#x4e00;&#x4e2a;&#x76ee;&#x5f55;&#x5f00;&#x59cb;&#x9012;&#x5f52;&#x641c;&#x7d22;&#x6240;&#x6709;&#x76ee;&#x5f55;&#x3002;&#x6bd4;&#x5982;:</p>

<pre class="prettyprint"><code class="language-xml">&lt;bean id=&quot;sqlSessionFactory&quot; class=&quot;org.mybatis.spring.SqlSessionFactoryBean&quot;&gt;
  &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot; /&gt;
  &lt;property name=&quot;mapperLocations&quot; value=&quot;classpath*:sample/config/mappers/**/*.xml&quot; /&gt;
&lt;/bean&gt;
</code></pre>
<p>&#x8fd9;&#x4f1a;&#x4ece;&#x7c7b;&#x8def;&#x5f84;&#x4e0b;&#x52a0;&#x8f7d;&#x6240;&#x6709;&#x5728; <code>sample.config.mappers</code> &#x5305;&#x548c;&#x5b83;&#x7684;&#x5b50;&#x5305;&#x4e2d;&#x7684; MyBatis &#x6620;&#x5c04;&#x5668; XML &#x914d;&#x7f6e;&#x6587;&#x4ef6;&#x3002;</p>
<p>&#x5728;&#x5bb9;&#x5668;&#x7ba1;&#x7406;&#x4e8b;&#x52a1;&#x7684;&#x65f6;&#x5019;&#xff0c;&#x4f60;&#x53ef;&#x80fd;&#x9700;&#x8981;&#x7684;&#x4e00;&#x4e2a;&#x5c5e;&#x6027;&#x662f; <code>transactionFactoryClass</code>&#x3002;&#x8bf7;&#x53c2;&#x8003;&#x4e8b;&#x52a1;&#x4e00;&#x7ae0;&#x7684;&#x76f8;&#x5173;&#x7ae0;&#x8282;&#x3002;</p>
<p>&#x5982;&#x679c;&#x4f60;&#x4f7f;&#x7528;&#x4e86;&#x591a;&#x4e2a;&#x6570;&#x636e;&#x5e93;&#xff0c;&#x90a3;&#x4e48;&#x9700;&#x8981;&#x8bbe;&#x7f6e; <code>databaseIdProvider</code> &#x5c5e;&#x6027;&#xff1a;</p>

<pre class="prettyprint"><code class="language-xml">&lt;bean id=&quot;databaseIdProvider&quot; class=&quot;org.apache.ibatis.mapping.VendorDatabaseIdProvider&quot;&gt;
  &lt;property name=&quot;properties&quot;&gt;
    &lt;props&gt;
      &lt;prop key=&quot;SQL Server&quot;&gt;sqlserver&lt;/prop&gt;
      &lt;prop key=&quot;DB2&quot;&gt;db2&lt;/prop&gt;
      &lt;prop key=&quot;Oracle&quot;&gt;oracle&lt;/prop&gt;
      &lt;prop key=&quot;MySQL&quot;&gt;mysql&lt;/prop&gt;
    &lt;/props&gt;
  &lt;/property&gt;
&lt;/bean&gt;
</code></pre>

<pre class="prettyprint"><code class="language-xml">&lt;bean id=&quot;sqlSessionFactory&quot; class=&quot;org.mybatis.spring.SqlSessionFactoryBean&quot;&gt;
  &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot; /&gt;
  &lt;property name=&quot;mapperLocations&quot; value=&quot;classpath*:sample/config/mappers/**/*.xml&quot; /&gt;
  &lt;property name=&quot;databaseIdProvider&quot; ref=&quot;databaseIdProvider&quot;/&gt;
&lt;/bean&gt;
</code></pre>
<p><span class="label important">&#x63d0;&#x793a;</span>
&#x81ea; 1.3.0 &#x7248;&#x672c;&#x5f00;&#x59cb;&#xff0c;&#x65b0;&#x589e;&#x7684; <code>configuration</code> &#x5c5e;&#x6027;&#x80fd;&#x591f;&#x5728;&#x6ca1;&#x6709;&#x5bf9;&#x5e94;&#x7684; MyBatis XML &#x914d;&#x7f6e;&#x6587;&#x4ef6;&#x7684;&#x60c5;&#x51b5;&#x4e0b;&#xff0c;&#x76f4;&#x63a5;&#x8bbe;&#x7f6e; <code>Configuration</code> &#x5b9e;&#x4f8b;&#x3002;&#x4f8b;&#x5982;&#xff1a;</p>

<pre class="prettyprint"><code class="language-xml">&lt;bean id=&quot;sqlSessionFactory&quot; class=&quot;org.mybatis.spring.SqlSessionFactoryBean&quot;&gt;
  &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot; /&gt;
  &lt;property name=&quot;configuration&quot;&gt;
    &lt;bean class=&quot;org.apache.ibatis.session.Configuration&quot;&gt;
      &lt;property name=&quot;mapUnderscoreToCamelCase&quot; value=&quot;true&quot;/&gt;
    &lt;/bean&gt;
  &lt;/property&gt;
&lt;/bean&gt;
</code></pre></section></section>        </main>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>©      2010–2025
<a href="https://www.mybatis.org/">MyBatis.org</a>
</p>
        </div>
      </div>
    </footer>
  </body>
</html>
