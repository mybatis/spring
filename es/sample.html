<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.8.1 from src/site/es/xdoc/sample.xml at 01 abril 2019
 | Rendered using Apache Maven Fluido Skin 1.7
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="es" lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="author" content="Eduardo Macarron" />
    <meta name="Date-Revision-yyyymmdd" content="20190401" />
    <meta http-equiv="Content-Language" content="es" />
    <title>mybatis-spring &#x2013; MyBatis-Spring | Sample Code</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.7.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />
    <script type="text/javascript" src="./js/apache-maven-fluido-1.7.min.js"></script>
  </head>
  <body class="topBarDisabled">
    <div class="container-fluid">
      <div id="banner">
        <div class="pull-left"><div id="bannerLeft"><h2>mybatis-spring</h2>
</div>
</div>
        <div class="pull-right"><a href="../../" id="bannerRight" title="MyBatis logo"><img src="../../images/mybatis-logo.png"  alt="MyBatis logo"/></a></div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
        <li id="publishDate">Publicado el: 01 abril 2019<span class="divider">|</span>
</li>
          <li id="projectVersion">Versión: 2.0.0</li>
        </ul>
      </div>
      <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
    <ul class="nav nav-list">
      <li class="nav-header">Manual de Referencia</li>
    <li><a href="index.html" title="Introducción"><span class="none"></span>Introducción</a></li>
    <li><a href="getting-started.html" title="Primeros pasos"><span class="none"></span>Primeros pasos</a></li>
    <li><a href="factorybean.html" title="SqlSessionFactoryBean"><span class="none"></span>SqlSessionFactoryBean</a></li>
    <li><a href="transactions.html" title="Transacciones"><span class="icon-chevron-right"></span>Transacciones</a></li>
    <li><a href="sqlsession.html" title="Uso de SqlSession"><span class="icon-chevron-right"></span>Uso de SqlSession</a></li>
    <li><a href="mappers.html" title="Inyección de Mappers"><span class="icon-chevron-right"></span>Inyección de Mappers</a></li>
    <li><a href="boot.html" title="Spring Boot"><span class="none"></span>Spring Boot</a></li>
    <li><a href="using-api.html" title="Uso del API de MyBatis"><span class="none"></span>Uso del API de MyBatis</a></li>
    <li><a href="batch.html" title="Spring Batch"><span class="none"></span>Spring Batch</a></li>
    <li class="active"><a href="#"><span class="none"></span>Código de ejemplo</a></li>
      <li class="nav-header">Documentación del proyecto</li>
    <li><a href="project-info.html" title="Información del proyecto"><span class="icon-chevron-right"></span>Información del proyecto</a></li>
    <li><a href="project-reports.html" title="Informes del proyecto"><span class="icon-chevron-right"></span>Informes del proyecto</a></li>
</ul>
          <hr />
          <div id="poweredBy">
            <div class="clear"></div>
            <div class="clear"></div>
            <div class="clear"></div>
            <div class="clear"></div>
<a href="http://maven.apache.org/" title="Generado por Maven" class="poweredBy"><img class="builtBy" alt="Generado por Maven" src="./images/logos/maven-feather.png" /></a>
            </div>
          </div>
        </div>
        <div id="bodyColumn"  class="span10" >


	
		<div class="section">
<h2><a name="Sample_Code"></a>Sample Code</h2>

			
<p>
				<span class="label important">NOTE</span>
				See <a class="externalLink" href="https://github.com/mybatis/jpetstore-6">JPetstore 6 demo</a> to know about how to use Spring with a full web application server.
			</p>

			
<p>
				You can check out sample code from the MyBatis-Spring <a class="externalLink" href="https://github.com/mybatis/spring/tree/master/src/test/java/org/mybatis/spring/sample">repo</a>:
			</p>
			
<p>
				Any of the samples can be run with JUnit 5.
			</p>
			
<p>
				The sample code shows a typical design where a transactional service gets domain objects from a data access layer.
			</p>
			
<p>
				<tt>FooService.java</tt> acts as the service:
			</p>
			
<div class="source"><pre class="prettyprint">
@Transactional
public class FooService {

  private final UserMapper userMapper;

  public FooService(UserMapper userMapper) {
    this.userMapper = userMapper;
  }

  public User doSomeBusinessStuff(String userId) {
    return this.userMapper.getUser(userId);
  }

}
</pre></div>
			
<p>
				It is a transactional bean, so when the method is called, the transaction is started 
				and the transaction is committed when the method ends without throwing an uncaught exception.
				Notice that transactional behaviour is configured with the
				<tt>@Transactional</tt>
				attribute. This is not required; any other way provided by Spring can be used to demarcate
				your transactions.
			</p>
			
<p>
				This service calls a data access layer built with MyBatis. This layer
				consists on a just an interface <tt>UserMapper.java</tt>
				that will be used with a dynamic proxy built by MyBatis at
				runtime and injected into the service by Spring.
			</p>
			
<div class="source"><pre class="prettyprint">
public interface UserMapper {

  User getUser(String userId);

}
</pre></div>			
			
<p> 
			    Note that, for the sake of simplicity we used the interface <tt>UserMapper.java</tt> for the DAO scenario
			    where a DAO is built with an interface and a implementation though in this case it would have been more
			    adequate to use an interface called <tt>UserDao.java</tt> instead.
			</p>
			
<p>
				We will see different ways to find the mapper interface, register it to Spring and inject it into the service bean:
			</p>
			
<table border="0" class="table table-striped"><caption>Scenarios</caption>
				
				<thead>
					
<tr class="a">
						
<th>Sample test</th>
						
<th>Description</th>
					</tr>
				</thead>
				<tbody>
					
<tr class="b">
						
<td>
							<tt>SampleMapperTest.java</tt>
						</td>
						
<td>
							Shows you the base configuration based on a <tt>MapperFactoryBean</tt>
							that will dynamically build an implementation for <tt>UserMapper</tt>
						</td>
					</tr>
					
<tr class="a">
						
<td>
							<tt>SampleScannerTest.java</tt>
						</td>
						
<td>
							Shows how to use the <tt>MapperScannerConfigurer</tt> so all the mappers in a project are autodiscovered.
						</td>
					</tr>
					
<tr class="b">
						
<td>
							<tt>SampleSqlSessionTest.java</tt>
						</td>
						
<td>
							Shows how to hand code a DAO using a Spring managed <tt>SqlSession</tt>
							and providing your own implementation <tt>UserDaoImpl.java</tt>.
						</td>
					</tr>
					
<tr class="a">
						
<td>
							<tt>SampleEnableTest</tt>
						</td>
						
<td>
							Shows how to use Spring's <tt>@Configuration</tt> with the <tt>@MapperScann</tt> annotation so
							mappers are autodiscovered.
						</td>
					</tr>
					
<tr class="b">
						
<td>
							<tt>SampleNamespaceTest</tt>
						</td>
						
<td>
							Shows how to use the custom MyBatis XML namespace. 
						</td>
					</tr>
          
<tr class="a">
            
<td>
              <tt>SampleJavaConfigTest.java</tt>
            </td>
            
<td>
              Shows how to use Spring's <tt>@Configuration</tt> to create MyBatis beans manually.
            </td>
          </tr>
          
<tr class="b">
            
<td>
              <tt>SampleJobJavaConfigTest.java</tt>
            </td>
            
<td>
              Shows how to use <tt>ItemReader</tt> and <tt>ItemWriter</tt> on Spring Batch using Java Configuration.
            </td>
          </tr>
          
<tr class="a">
            
<td>
              <tt>SampleJobXmlConfigTest.java</tt>
            </td>
            
<td>
              Shows how to use <tt>ItemReader</tt> and <tt>ItemWriter</tt> on Spring Batch using XML Configuration.
            </td>
          </tr>
				</tbody>
			</table>
			
<p>
				Please take a look at the different <tt>applicationContext.xml</tt> files to see MyBatis-Spring in action.
			</p>

		</div>
	

        </div>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>Copyright &copy;2010&#x2013;2019
<a href="http://www.mybatis.org/">MyBatis.org</a>.
All rights reserved.</p>
        </div>
      </div>
    </footer>
  </body>
</html>
