<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 18 enero 2014 
 | Rendered using Apache Maven Fluido Skin 1.3.1
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="es" lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="author" content="Hunter Presnall" />
    <meta name="author" content="Eduardo Macarron" />
    <meta name="Date-Revision-yyyymmdd" content="20140118" />
    <meta http-equiv="Content-Language" content="es" />
    <title>MyBatis - 
    MyBatis-Spring | Código de ejemplo</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.3.1.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido-1.3.1.min.js"></script>

    
                  </head>
        <body class="topBarDisabled">
          
        
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                <div id="bannerLeft">
                <h2>MyBatis-Spring</h2>
                </div>
                      </div>
        <div class="pull-right">                                <a href="../../" id="bannerRight" title="MyBatis logo">
                                                                                        <img src="http://mybatis.github.io/images/mybatis-logo.png"  alt="MyBatis logo"/>
                </a>
      </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
                  <li id="publishDate">Publicado el: 18 enero 2014
                      <span class="divider">|</span>
                   </li>
                  <li id="projectVersion">Versión: 1.2.2-SNAPSHOT
                      </li>
                      
                
                    
      
                            </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span3">
          <div class="well sidebar-nav">
                
                    
                <ul class="nav nav-list">
                    <li class="nav-header">Manual de Referencia</li>
                              
      <li>
  
                          <a href="index.html" title="Introducción">
          <i class="none"></i>
        Introducción</a>
            </li>
                
      <li>
  
                          <a href="getting-started.html" title="Primeros pasos">
          <i class="none"></i>
        Primeros pasos</a>
            </li>
                
      <li>
  
                          <a href="factorybean.html" title="SqlSessionFactoryBean">
          <i class="none"></i>
        SqlSessionFactoryBean</a>
            </li>
                                                                                                      
      <li>
  
                          <a href="transactions.html" title="Transacciones">
          <i class="icon-chevron-right"></i>
        Transacciones</a>
                  </li>
                                                                                    
      <li>
  
                          <a href="sqlsession.html" title="Uso de SqlSession">
          <i class="icon-chevron-right"></i>
        Uso de SqlSession</a>
                  </li>
                                                                                    
      <li>
  
                          <a href="mappers.html" title="Inyección de Mappers">
          <i class="icon-chevron-right"></i>
        Inyección de Mappers</a>
                  </li>
                
      <li>
  
                          <a href="using-api.html" title="Uso del API de MyBatis">
          <i class="none"></i>
        Uso del API de MyBatis</a>
            </li>
                
      <li>
  
                          <a href="batch.html" title="Spring Batch">
          <i class="none"></i>
        Spring Batch</a>
            </li>
                
      <li class="active">
  
            <a href="#"><i class="none"></i>Código de ejemplo</a>
          </li>
                              <li class="nav-header">Documentación del proyecto</li>
                                                                                                                                                                                                                                                                                      
      <li>
  
                          <a href="project-info.html" title="Información del proyecto">
          <i class="icon-chevron-right"></i>
        Información del proyecto</a>
                  </li>
                                                                                                                                                                                                                                                      
      <li>
  
                          <a href="project-reports.html" title="Informes del proyecto">
          <i class="icon-chevron-right"></i>
        Informes del proyecto</a>
                  </li>
            </ul>
                
                    
                
          <hr />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Generado por Maven" class="poweredBy">
        <img class="builtBy" alt="Generado por Maven" src="./images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span9" >
                                  
            <!-- Copyright 2010-2012 the original author or authors.

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License. --><!-- version: $Id$ -->

  
    <div class="section">
<h2>C&#xf3;digo de ejemplo<a name="Cdigo_de_ejemplo"></a></h2>
      
<p>
        JPetStore 6 es una aplicaci&#xf3;n web completa construida sobre MyBatis 3,
      	<a class="externalLink" href="http://www.springsource.org">Spring 3</a> y <a class="externalLink" href="http://www.stripesframework.org/">Stripes</a>.
        Est&#xe1; disponible para su descarga en la secci&#xf3;n de
        <a class="externalLink" href="https://github.com/mybatis/jpetstore-6/releases">downloads</a>
        del site de MyBatis.
        En esta secci&#xf3;n haremos un recorrido por este ejemplo para comprender c&#xf3;mo est&#xe1; construido y c&#xf3;mo ejecutarlo.
      </p>
      
<div class="section">
<h3>Prop&#xf3;sito<a name="Propsito"></a></h3>
      	
<p>
      	Esta nueva versi&#xf3;n de JPetStore viene con la misma idea en mente que sus precedesores: <b>hazlo f&#xe1;cil</b>. El prop&#xf3;sito principal
      	tras JPetStore 6 es demostrar que una aplicaci&#xf3;n web completa puede construirse con s&#xf3;lo unas pocas clases, y lo que es m&#xe1;s importante,
      	sin necesidad de tener grandes conocimientos de programaci&#xf3;n. S&#xf3;lo necesitas saber java b&#xe1;sico y SQL.
      	</p>
      	
<p>
      	La sexta versi&#xf3;n de JPetStore es la m&#xe1;s peque&#xf1;a de la familia. S&#xf3;lo usa 24 clases y conserva un buen dise&#xf1;o y estructura de programa.
      	Como veremos un poco despu&#xe9;s, no encontrar&#xe1;s c&#xf3;digo JDBC, de creaci&#xf3;n de objetos, de enlace de objetos o de gesti&#xf3;n de transacciones.
      	Y lo que es m&#xe1;s sorprendente es que <b>&#xa1;no encontrar&#xe1;s ninguna llamada al API de MyBatis!</b>. A pesar de que esto suena a m&#xe1;gia,
      	ver&#xe1;s que la combinaci&#xf3;n de los mappers de MyBatis con la inyecci&#xf3;n de dependencias te permite realizar aplicaciones libres de dependencia
      	de MyBatis.
      	</p>
      </div>
      
<div class="section">
<h3>Estructura del c&#xf3;digo<a name="Estructura_del_cdigo"></a></h3>
      	
<p> JPetStore 6 sigue la t&#xed;pica estructura de una aplicaci&#xf3;n maven.</p>

<div>
<pre>/jpetstore                    <tt>&lt;-- El fichero maven pom.xml va aqui.</tt>
  /src
    /main/
      /java                   <tt>&lt;-- El c&#xf3;digo java va aqui.</tt>
        /org/
          /mybatis
            /jpetstore
              /domain         <tt>&lt;-- Los objetos de negocio van aqui.</tt>
              /persistence    <tt>&lt;-- Las mapper interfaces van aqui.</tt>
              /service        <tt>&lt;-- La l&#xf3;gica de aplicaci&#xf3;n va aqui.</tt>
              /web
                /actions      <tt>&lt;-- La l&#xf3;gica de presentaci&#xf3;n (actions) van aqui.</tt>
      /resources              <tt>&lt;-- Aqui van los recursos no-java.</tt>
        /org
          /mybatis
            /jpetstore
              /persistence    <tt>&lt;-- Los ficheros de mapeo XML van aqui.</tt>
        /database
      /webapp
        /css
        /images
        /WEB-INF              <tt>&lt;-- web.xml y applicationContext.xml est&#xe1;n aqui.</tt>
          /jsp                <tt>&lt;-- los ficheros JSP van aqui.</tt>
      </pre></div>
      </div>

      
<div class="section">
<h3>Ficheros de configuraci&#xf3;n<a name="Ficheros_de_configuracin"></a></h3>
      
<p>
      Los ficheros de configuraci&#xf3;n se leen durante el arranque de la aplicaci&#xf3;n. Su prop&#xf3;sito es configurar los tres
      frameworks que componen la aplicaci&#xf3;n: Stripes, Spring y MyBatis. S&#xf3;lo tendremos que configurar
      dos ficheros: web.xml y applicationContext.xml.
      </p>
      
<div class="section">
<h4>web.xml<a name="web.xml"></a></h4>
      
<p>
      Primeramente debemos arrancar Stripes, asi que, para ello, seguimos el manual de Stripes. El manual indica
      que debe configurarse un dispatcher servlet y un filtro filter. Vamos all&#xe1;.
      </p>

<div class="source">
<pre>
&lt;filter&gt;
	&lt;display-name&gt;Stripes Filter&lt;/display-name&gt;
	&lt;filter-name&gt;StripesFilter&lt;/filter-name&gt;
	&lt;filter-class&gt;net.sourceforge.stripes.controller.StripesFilter&lt;/filter-class&gt;
&lt;/filter&gt;
&lt;filter-mapping&gt;
	&lt;filter-name&gt;StripesFilter&lt;/filter-name&gt;
	&lt;servlet-name&gt;StripesDispatcher&lt;/servlet-name&gt;
	&lt;dispatcher&gt;REQUEST&lt;/dispatcher&gt;
&lt;/filter-mapping&gt;
&lt;servlet&gt;
	&lt;servlet-name&gt;StripesDispatcher&lt;/servlet-name&gt;
	&lt;servlet-class&gt;net.sourceforge.stripes.controller.DispatcherServlet&lt;/servlet-class&gt;
	&lt;load-on-startup&gt;1&lt;/load-on-startup&gt;
&lt;/servlet&gt;
&lt;servlet-mapping&gt;
	&lt;servlet-name&gt;StripesDispatcher&lt;/servlet-name&gt;
	&lt;url-pattern&gt;*.action&lt;/url-pattern&gt;
&lt;/servlet-mapping&gt;
</pre></div>

	
<p>
	Stripes es capaz de buscar los ActionBeans, para ello debemos configurar el paquete base desde el que debe comenzar la b&#xfa;squeda.</p>


<div class="source">
<pre>
&lt;filter-class&gt;net.sourceforge.stripes.controller.StripesFilter&lt;/filter-class&gt;
  &lt;init-param&gt;
    &lt;param-name&gt;ActionResolver.Packages&lt;/param-name&gt;
    &lt;param-value&gt;org.mybatis.jpetstore.web&lt;/param-value&gt;
  &lt;/init-param&gt;
&lt;/filter&gt;
</pre></div>

	
<p>
	Hemos acabado con Stripes. Continuemos con la parte de Spring. Seg&#xfa;n el manual de Spring debemos a&#xf1;adir un context listener
	para arrancar Spring asi que a&#xf1;ad&#xe1;moslo:</p>


<div class="source">
<pre>
&lt;listener&gt;
  &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;
&lt;/listener&gt;
</pre></div>

	
<p>
	Por defecto Spring usa el fichero de configuraci&#xf3;n <tt>/WEB-INF/applicationContext.xml</tt> si no indicamos uno distinto.
	El valor por defecto est&#xe1; bien para nosotros.
	</p>

	
<p>
	Ahora tenemos que decirle a Stripes que va a ejecutarse junto con Spring. De esta forma seremos capaces de
	inyectar beans de Spring en ActionBeans de Stripes. Para ello, siguiendo una vez m&#xe1;s el manual de Stripes, configuramos un interceptor
	como sigue:
	</p>


<div class="source">
<pre>
&lt;filter-class&gt;net.sourceforge.stripes.controller.StripesFilter&lt;/filter-class&gt;
  ...
  &lt;init-param&gt;
    &lt;param-name&gt;Interceptor.Classes&lt;/param-name&gt;
    &lt;param-value&gt;net.sourceforge.stripes.integration.spring.SpringInterceptor&lt;/param-value&gt;
  &lt;/init-param&gt;
&lt;/filter&gt;
</pre></div>

      
<p>
      Hemos acabado con el web.xml. Como habr&#xe1;s notado, no hemos realizado ninguna configuraci&#xf3;n de MyBatis 3 aun.
      Esa configuraci&#xf3;n va en el fichero applicationContext.xml de Spring y la veremos en la siguiente seccion.
      section.
      </p>

      </div>
<div class="section">
<h4>applicationContext.xml<a name="applicationContext.xml"></a></h4>
      
<p>
      Como ya sabes el fichero applicationContext.xml es el fichero de configuraci&#xf3;n de Spring. Spring es un framework
      de inyecci&#xf3;n de dependencias y debe conocer qu&#xe9; beans debe crear y como enlazarlos y esto es precisamente para lo que
      sirve el applicationContext.xml. Ech&#xe9;mosle un vistazo.
      </p>

      
<p>
      La primera tarea y la m&#xe1;s sencilla que debemos hacer es indicarle a Spring donde buscar nuestros beans de servicio.
      Dejaremos que Spring los busque en nuestro classpath y para ello tenemos que indicar a Spring el paquete base donde comenzar la b&#xfa;squeda:
      </p>


<div class="source">
<pre>
&lt;context:component-scan base-package=&quot;org.mybatis.jpetstore.service&quot; /&gt;
</pre></div>

	  
<p>
	  <span class="label important">NOTA</span> Spring no es capaz de localizar de forma autom&#xe1;tica los mappers de MyBatis.
	  Un mapper no es un bean normal y Spring no conocer&#xed;a c&#xf3;mo instanciarlos. Necesitaremos un
	  <tt>MapperScannerConfigurer</tt> para esta tarea, como veremos pronto.
	  </p>

	  
<p>
	  Necesitaremos tambi&#xe9;n un <tt>DataSource</tt> y un <tt>TransactionManager</tt>. Como esto es una aplicaci&#xf3;n de demo usaremos
	  un <tt>DataSource</tt> de test de Spring que crea una base de datos HSQL en memoria y carga en ella los scripts de datos,
	  y el <tt>DataSourceTransactionManager</tt> est&#xe1;ndar de Spring para gestionar transacciones.
	  </p>


<div class="source">
<pre>
&lt;jdbc:embedded-database id=&quot;dataSource&quot;&gt;
  &lt;jdbc:script location=&quot;classpath:database/jpetstore-hsqldb-schema.sql&quot;/&gt;
  &lt;jdbc:script location=&quot;classpath:database/jpetstore-hsqldb-dataload.sql&quot;/&gt;
&lt;/jdbc:embedded-database&gt;

&lt;bean id=&quot;transactionManager&quot; class=&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;&gt;
  &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot; /&gt;
&lt;/bean&gt;
</pre></div>

	  
<p>
	  Hasta ahora, todo lo que hemos hecho es configurar Stripes y Spring y ya es momento de movernos a la parte de MyBatis.
	  Como ya has aprendido del manual de MyBatis para configurar MyBatis con Spring necesitas al menos dos cosas:
	  un <tt>SqlSessionFactoryBean</tt> y un mapper. Asi que pong&#xe1;monos manos a la obra.
	  Primeramente definimos un <tt>SqlSessionFactoryBean</tt>:
	  </p>


<div class="source">
<pre>
&lt;bean id=&quot;sqlSessionFactory&quot; class=&quot;org.mybatis.spring.SqlSessionFactoryBean&quot;&gt;
  &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot; /&gt;
&lt;/bean&gt;
</pre></div>

      
<p>
      Y ahora tenemos que configurar nuestros mappers. Para ello vamos a usar un <tt>MapperScannerConfigurer</tt>
      que funciona de forma similar al component scan de Spring. El buscar&#xe1; mappers en nuestro classpath y los registrar&#xe1; en Spring.
      De forma similar a como hicimos con el component-scan de Spring debemos configurar un paquete base donde iniciar la b&#xfa;squeda.
      </p>


<div class="source">
<pre>
&lt;bean class=&quot;org.mybatis.spring.mapper.MapperScannerConfigurer&quot;&gt;
  &lt;property name=&quot;basePackage&quot; value=&quot;org.mybatis.jpetstore.persistence&quot; /&gt;
&lt;/bean&gt;
</pre></div>

      
<p>
      Para escribir algo menos en nuestros ficheros de mapeo XML podemos utilizar alias cortos para nuestros beans.
      El <tt>SqlSessionFactoryBean</tt> tiene la capacidad de buscar beans y registrar sus nombres cortos como alias si
      configuramosla propiedad <tt>typeAliasPackage</tt> como sigue:
      </p>


<div class="source">
<pre>
&lt;bean id=&quot;sqlSessionFactory&quot; class=&quot;org.mybatis.spring.SqlSessionFactoryBean&quot;&gt;
  &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot; /&gt;
  &lt;property name=&quot;typeAliasesPackage&quot; value=&quot;org.mybatis.jpetstore.domain&quot; /&gt;
&lt;/bean&gt;
</pre></div>

		
<p>
		Nuestra aplicaci&#xf3;n est&#xe1; completamente configurada y lista para ejecutarse. Pero antes que eso demos un paseo por el c&#xf3;digo
		para ver qu&#xe9; pinta tiene.
		</p>

      </div></div>

      
<div class="section">
<h3>Paseo por el c&#xf3;digo<a name="Paseo_por_el_cdigo"></a></h3>
      
<p>JPetStore 6 es una aplicaci&#xf3;n MVC t&#xed;pica con tres capas: presentaci&#xf3;n, logica y acceso a datos.
      </p>
      
<div class="section">
<h4>Presentaci&#xf3;n<a name="Presentacin"></a></h4>
      
<p>
      La capa de presentaci&#xf3;n est&#xe1; compuesta por ficheros JSP y ActionBeans de Stripes. Los JSPs usan HTML simple,
      tags JSTL y tagas de Stripes asi que no hay nada especial sobre ellos de cara a este ejemplo. Los ActionBeans de
      Stripes son como los actions de Struts o los controllers de Spring MVC asi que tampoco hay nada especial acerca de ellos.
      </p>
      
<p>
      Dado que hemos integrado Stripes con Spring, podemos inyectar nuestros servcios en nuestros ActionBeans de forma que podemos
      simplemente usarlos sin preocuparnos de crearlos o buscarlos. Echa un vistazo al <tt>CatalogActionBean</tt>:</p>


<div class="source">
<pre>
@SessionScope
public class CatalogActionBean extends AbstractActionBean {
  ...
  @SpringBean
  private transient CatalogService catalogService;
  ...
  public ForwardResolution viewCategory() {
    if (categoryId != null) {
      productList = catalogService.getProductListByCategory(categoryId);
      category = catalogService.getCategory(categoryId);
    }
    return new ForwardResolution(VIEW_CATEGORY);
  }
  ...
</pre></div>

	  
<p>
	  F&#xed;jate que en la anotaci&#xf3;n <tt>@SpringBean</tt> annotation, que es una anotaci&#xf3;n de Stripes que le indica
	  a Stripes que busque este bean en Spring y lo inyecte en el ActionBean.</p>

      </div>
<div class="section">
<h4>L&#xf3;gica<a name="Lgica"></a></h4>
      
<p>
      La l&#xf3;gica de aplicaci&#xf3;n est&#xe1; compuesta de Java beans planos que actuan como servicios y Java beans planos que
      act&#xfa;an como objetos de dominio. Esta capa se encarga de rellenar objetos de dominio con datos de base de datos y
      de modificar la base de datos con el contenido de estos mismos objetos. Para ello esta capa debe ser transaccional, esto es,
      debe ser capaz de ralizar modificaciones at&#xf3;micas en la base de datos.
      </p>
      
<p>Veamos la clase <tt>OrderService</tt> para ver c&#xf3;mo hemos hecho todo esto:
      </p>


<div class="source">
<pre>
@Service
public class OrderService {

  @Autowired
  private ItemMapper itemMapper;
  @Autowired
  private OrderMapper orderMapper;
  @Autowired
  private LineItemMapper lineItemMapper;

  @Transactional
  public void insertOrder(Order order) {
    order.setOrderId(getNextId(&quot;ordernum&quot;));
    for (int i = 0; i &lt; order.getLineItems().size(); i++) {
      LineItem lineItem = (LineItem) order.getLineItems().get(i);
      String itemId = lineItem.getItemId();
      Integer increment = new Integer(lineItem.getQuantity());
      Map&lt;String, Object&gt; param = new HashMap&lt;String, Object&gt;(2);
      param.put(&quot;itemId&quot;, itemId);
      param.put(&quot;increment&quot;, increment);
      itemMapper.updateInventoryQuantity(param);
    }

    orderMapper.insertOrder(order);
    orderMapper.insertOrderStatus(order);
    for (int i = 0; i &lt; order.getLineItems().size(); i++) {
      LineItem lineItem = (LineItem) order.getLineItems().get(i);
      lineItem.setOrderId(order.getOrderId());
      lineItemMapper.insertLineItem(lineItem);
    }
  }
</pre></div>

      
<p>
      Lo primero que habr&#xe1;s notado es que no hay c&#xf3;digo JDBC en el servicio y tampoco c&#xf3;digo de MyBatis.
      Puedes pensar que hemos usado el patron DAO y que el c&#xf3;digo de acceso a base de datos est&#xe1; en la capa de acceso a datos,
      pero como veremos despu&#xe9;s, la capa de acceso a base de datos est&#xe1; construida con mappers de MyBatis, que son
      interfaces java simples, y este es el motivo por el que <b>no encontra&#xe1;s ninguna llamada al API de MyBatis en toda la aplicaci&#xf3;n</b>.
      Simplemente no es necesario.
      </p>

      
<p>
      Lo segundo en lo que te puedes haber fijado es que no hay commits ni rollbacks. Esto es porque el c&#xf3;digo usa
      la demarcaci&#xf3;n de transacciones declarativa de Spring que se soporta completamente en MyBatis-Spring.
      La anotaci&#xf3;n <tt>@Transactional</tt> de Spring indica que este m&#xe9;todo es transaccional,
      lo que significa que todas las llamadas a mappers <tt>updateInventoryQuantity</tt>, <tt>insertOrder</tt> and
      <tt>insertLineItem</tt> deben finalizar con &#xe9;xito o no hacerlo ninguna.</p>

      </div>
<div class="section">
<h4>Persistencia<a name="Persistencia"></a></h4>
      
<p>
      La capa de persistencia est&#xe1; compuesta por mappers de MyBatis. Los mappers son interfaces Java simples y ficheros XML que contienen
      las sentencias SQL. No hay c&#xf3;digo Java en esta capa. Cuando se ejecuta el m&#xe9;todo
      <tt>getOrder</tt> del mapper interface <tt>OrderMapper</tt>,
      MyBatis ejecuta la sentencia SQL del stamtent getOrder del ficheroOrderMapper.xml file y rellena el bean
      de dominio <tt>Order</tt> con los datos obtenidos.
      </p>


<div class="source">
<pre>
public interface OrderMapper {
  List&lt;Order&gt; getOrdersByUsername(String username);
  Order getOrder(int orderId);
  void insertOrder(Order order);
  void insertOrderStatus(Order order);
}</pre></div>


<div class="source">
<pre>
&lt;mapper namespace=&quot;org.mybatis.jpetstore.persistence.OrderMapper&quot;&gt;

  &lt;cache /&gt;

  &lt;select id=&quot;getOrder&quot; resultType=&quot;Order&quot; parameterType=&quot;int&quot;&gt;
    SELECT
      BILLADDR1 AS billAddress1,
      BILLADDR2 AS billAddress2,
      BILLCITY,
      BILLCOUNTRY,
      BILLSTATE,
      BILLTOFIRSTNAME,
      BILLTOLASTNAME,
      BILLZIP,
      SHIPADDR1 AS shipAddress1,
      SHIPADDR2 AS shipAddress2,
      SHIPCITY,
      SHIPCOUNTRY,
      SHIPSTATE,
      SHIPTOFIRSTNAME,
      SHIPTOLASTNAME,
      SHIPZIP,
      CARDTYPE,
      COURIER,
      CREDITCARD,
      EXPRDATE AS expiryDate,
      LOCALE,
      ORDERDATE,
      ORDERS.ORDERID,
      TOTALPRICE,
      USERID AS username,
      STATUS
    FROM ORDERS, ORDERSTATUS
    WHERE ORDERS.ORDERID = #{value}
      AND ORDERS.ORDERID = ORDERSTATUS.ORDERID
  &lt;/select&gt;
  ...
&lt;/mapper&gt;
</pre></div>

      
<p>
      <span class="label important">NOTE</span>
      Puedes a&#xf1;adir cach&#xe9; a tus queries f&#xe1;cilmente a&#xf1;adiendo un elemento &lt;cache /&gt; a tu fichero de mapeo XML
      O, si lo prefieres, Spring puede cachear a m&#xe1;s alto nivel, cacheando completamente la llamada al mapper o a todo el servicio.
      </p>

      </div></div>

      
<div class="section">
<h3>Running JPetStore<a name="Running_JPetStore"></a></h3>
        
<p>Te prenguntar&#xe1;s. &#xbf;Esto funciona? &#xa1;S&#xed;! Ejecut&#xe9;moslo.</p>
        
<p>Asumiendo que tienes un PC limpio estos son los pasos que debes seguir para ejecutar el ejemplo en Tomcat y Eclipse.</p>
        
<ul>
          
<li>Descarga e instala un JDK 6 o posterior</li>
          
<li>Descarga y descomprime Eclipse</li>
          
<li>Descarga y descomprime Tomcat</li>
          
<li>Ejecuta Eclipse</li>
          
<li>Ve a la pesta&#xf1;a Git</li>
          
<li>Clona el repositorio https://github.com/mybatis/jpetstore-6.git</li>
          
<li>Selecciona working directory, pulsa bot&#xf3;n derecho y selecciona Import Projects (general)</li>
          
<li>Ve a la pesta&#xf1;a Java EE</li>
          
<li>Bot&#xf3;n derecho en el projecto jpetstore y selecciona &quot;Configure/Convert to Maven project&quot;</li>
          
<li>Bot&#xf3;n derecho en el proyecto jpetstore y selecciona &quot;run on server&quot;</li>
          
<li>Selecciona Tomcat 7 Server y configura el directorio donde lo descomprimiste</li>
          
<li>&#xa1;&#xa1;La home de JPetStore deber&#xed;a mostrarse!!</li>
        </ul>

        
<p>
          Ya est&#xe1;s listo para jugar con la demo, experimentar tus propios cambios o lo que t&#xfa; quieras.
        </p>
        
<p>
          Y recuerda que si encuentras un bug o ves que falta algo o que hay algo mejorable (por ejemplo faltan los tests!),
          haz un fork del repositorio, c&#xe1;mbialo y abre un pull request. Gracias de antemano!
        </p>
        
<p>
          <span class="label important">NOTE</span>
		  JPetStore y debe ejecutarse en cualquier servidor compatible Servlet 2.5 y JSP 2.1. Tampoco es necesario NetBeans o Eclipse, 
		  puedes ejecutarlo desde tu IDE favorito o desde la l&#xed;nea de comando.
        </p>
      </div>
    </div>
  

                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
                      <div class="row-fluid">
                              <p >Copyright &copy;                    2010&#x2013;2014
                        <a href="http://www.mybatis.org/">MyBatis.org</a>.
            All rights reserved.      
                    
      </p>
        </div>

        
        
                </div>
    </footer>
        </body>
</html>
